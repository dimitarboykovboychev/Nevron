@{
    Layout = null;

    var numberList = ViewData["Numbers"] as List<int> ?? new List<int>();
    var sum = ViewData["Sum"] as int? ?? 0;
    var count = numberList.Count;
}

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Session Number Manager</title>

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" />
    <style>
        body {
            padding: 2rem;
        }
    </style>
</head>
<body>
    <h2 class="mb-4">Session Number Manager</h2>

    <div class="d-flex gap-3 mb-4">
        <button id="addBtn" class="btn btn-outline-secondary rounded">Add Number</button>
        <button id="sumBtn" class="btn btn-outline-secondary rounded">Sum Numbers</button>
        <button id="clearBtn" class="btn btn-secondary rounded">Clear Numbers</button>
    </div>

    <div id="numberInputs" class="mb-3">
        <ul id="numberList" class="list-unstyled mb-4">
        @{
            foreach (var number in numberList)
            {
                <li>@number</li>
            }
        }
        </ul>
    </div>

    <div class="gap-3 mb-3">
        <p>Count: <span id="count">@count</span></p>
        <p>Sum: <span id="sum">@sum</span></p>
    </div>

    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script>
        function updateList(numbers) {
            $("#numberList").empty();
            numbers.forEach(n => {
                $("#numberList").append(`<li>${n}</li>`);
            });
        }

        $("#addBtn").click(function () {
            $.post("/Home/AddNumber", function (data) {
                updateList(data.numbers);
                $("#count").text(data.count);
            });
        });

        $("#clearBtn").click(function () {
            $.post("/Home/ClearNumbers", function (data) {
                updateList(data.numbers);
                $("#count").text(data.count);
                $("#sum").text("0");
            });
        });

        $("#sumBtn").click(function () {
            $.get("/Home/SumNumbers", function (data) {
                $("#sum").text(data.sum);
            });
        });
    </script>
</body>
</html>
